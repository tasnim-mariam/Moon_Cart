<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta
            name="description"
            content="Admin Customers Management - MoonCart"
        />
        <title>Customers Management - Admin Dashboard</title>

        <!-- Favicon -->
        <link rel="icon" type="image/png" href="assets/images/favicon.png" />

        <!-- Google Fonts -->
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link
            href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap"
            rel="stylesheet"
        />

        <!-- Font Awesome -->
        <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
        />

        <!-- Stylesheets -->
        <link rel="stylesheet" href="css/main.css" />
        <link rel="stylesheet" href="css/responsive.css" />

        <style>
            body {
                background: #f5f6fa;
            }

            .admin-container {
                max-width: 1400px;
                margin: 0 auto;
                padding: 140px 20px 40px;
            }

            .page-header {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 30px;
                flex-wrap: wrap;
                gap: 20px;
            }

            .page-title {
                font-size: 32px;
                font-weight: 700;
                color: var(--text-dark);
                display: flex;
                align-items: center;
                gap: 15px;
            }

            .page-title i {
                color: var(--primary-color);
            }

            .search-bar {
                flex: 1;
                max-width: 400px;
                position: relative;
            }

            .search-bar input {
                width: 100%;
                padding: 12px 45px 12px 20px;
                border: 2px solid #e0e0e0;
                border-radius: 25px;
                font-size: 15px;
                transition: all 0.3s ease;
            }

            .search-bar input:focus {
                outline: none;
                border-color: var(--primary-color);
            }

            .search-bar i {
                position: absolute;
                right: 20px;
                top: 50%;
                transform: translateY(-50%);
                color: var(--text-light);
            }

            .customers-stats {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                gap: 20px;
                margin-bottom: 30px;
            }

            .stat-card {
                background: white;
                padding: 25px;
                border-radius: 15px;
                box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08);
                text-align: center;
                transition: all 0.3s ease;
            }

            .stat-card:hover {
                transform: translateY(-5px);
                box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
            }

            .stat-card h3 {
                font-size: 36px;
                font-weight: 700;
                color: var(--primary-color);
                margin-bottom: 8px;
            }

            .stat-card p {
                color: var(--text-light);
                font-size: 14px;
            }

            .customers-grid {
                display: grid;
                grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
                gap: 25px;
            }

            .customer-card {
                background: white;
                border-radius: 15px;
                padding: 25px;
                box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08);
                transition: all 0.3s ease;
                position: relative;
            }

            .customer-card:hover {
                transform: translateY(-5px);
                box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
            }

            .customer-header {
                display: flex;
                align-items: center;
                gap: 15px;
                margin-bottom: 20px;
            }

            .customer-avatar-large {
                width: 60px;
                height: 60px;
                border-radius: 50%;
                background: linear-gradient(
                    135deg,
                    var(--primary-color),
                    var(--secondary-color)
                );
                display: flex;
                align-items: center;
                justify-content: center;
                color: white;
                font-size: 24px;
                font-weight: 700;
                box-shadow: 0 5px 15px rgba(227, 30, 36, 0.3);
            }

            .customer-basic-info h3 {
                font-size: 18px;
                font-weight: 600;
                color: var(--text-dark);
                margin-bottom: 5px;
            }

            .customer-basic-info p {
                font-size: 13px;
                color: var(--text-light);
            }

            .customer-role {
                position: absolute;
                top: 20px;
                right: 20px;
                padding: 5px 12px;
                border-radius: 15px;
                font-size: 11px;
                font-weight: 600;
                text-transform: uppercase;
            }

            .role-customer {
                background: #d1ecf1;
                color: #0c5460;
            }

            .role-admin {
                background: #f8d7da;
                color: #721c24;
            }

            .customer-details {
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 15px;
                margin-bottom: 20px;
            }

            .detail-item {
                display: flex;
                flex-direction: column;
            }

            .detail-label {
                font-size: 12px;
                color: var(--text-light);
                margin-bottom: 5px;
            }

            .detail-value {
                font-weight: 600;
                color: var(--text-dark);
            }

            .customer-actions {
                display: flex;
                gap: 10px;
            }

            .btn-view-orders,
            .btn-contact {
                flex: 1;
                padding: 10px;
                border: none;
                border-radius: 8px;
                font-weight: 600;
                cursor: pointer;
                transition: all 0.3s ease;
                display: flex;
                align-items: center;
                justify-content: center;
                gap: 8px;
                font-size: 13px;
            }

            .btn-view-orders {
                background: #007bff;
                color: white;
            }

            .btn-view-orders:hover {
                background: #0056b3;
            }

            .btn-contact {
                background: #28a745;
                color: white;
            }

            .btn-contact:hover {
                background: #218838;
            }

            .empty-state {
                text-align: center;
                padding: 80px 20px;
                grid-column: 1 / -1;
            }

            .empty-state i {
                font-size: 80px;
                color: #ddd;
                margin-bottom: 20px;
            }

            .empty-state h3 {
                color: var(--text-light);
            }

            @media (max-width: 768px) {
                .customers-grid {
                    grid-template-columns: 1fr;
                }

                .search-bar {
                    max-width: 100%;
                }
            }
        </style>
    </head>
    <body>
        <!-- Top Bar -->
        <div class="top-bar">
            <div class="container">
                <div class="top-bar-content">
                    <div class="top-bar-left">
                        <span
                            ><i class="fas fa-phone-alt"></i> +1 234 567
                            8900</span
                        >
                        <span
                            ><i class="fas fa-envelope"></i>
                            info@mooncart.com</span
                        >
                    </div>
                    <div class="top-bar-right">
                        <span class="delivery-badge">
                            <i class="fas fa-shield-alt"></i> Admin Panel
                        </span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Header -->
        <header class="header">
            <div class="container">
                <nav class="navbar">
                    <a href="index.html" class="logo">
                        <div class="logo-icon">
                            <i class="fas fa-moon"></i>
                        </div>
                        <div class="logo-text">
                            <span class="logo-main"
                                >Moon<span class="logo-accent">Cart</span></span
                            >
                            <span class="logo-tagline">Fresh & Fast</span>
                        </div>
                    </a>

                    <ul class="nav-menu">
                        <li>
                            <a href="admin-dashboard.html" class="nav-link">
                                <i class="fas fa-tachometer-alt"></i>
                                <span>Dashboard</span>
                            </a>
                        </li>
                        <li>
                            <a href="admin-products.html" class="nav-link">
                                <i class="fas fa-box"></i>
                                <span>Products</span>
                            </a>
                        </li>
                        <li>
                            <a href="admin-orders.html" class="nav-link">
                                <i class="fas fa-shopping-bag"></i>
                                <span>Orders</span>
                            </a>
                        </li>
                        <li>
                            <a
                                href="admin-customers.html"
                                class="nav-link active"
                            >
                                <i class="fas fa-users"></i>
                                <span>Customers</span>
                            </a>
                        </li>
                    </ul>

                    <div class="nav-actions">
                        <!-- Account Section (Dynamic) -->
                        <div id="account-section" class="account-section">
                            <div class="auth-buttons">
                                <a href="login.html" class="btn-login">
                                    <i class="fas fa-sign-in-alt"></i>
                                    <span>Login</span>
                                </a>
                                <a href="signup.html" class="btn-signup">
                                    <i class="fas fa-user-plus"></i>
                                    <span>Sign Up</span>
                                </a>
                            </div>
                        </div>

                        <div class="menu-toggle">
                            <span></span>
                            <span></span>
                            <span></span>
                        </div>
                    </div>
                </nav>
            </div>
        </header>

        <!-- Main Content -->
        <div class="admin-container">
            <div class="page-header">
                <h1 class="page-title">
                    <i class="fas fa-users"></i>
                    Customers Management
                </h1>
                <div class="search-bar">
                    <input
                        type="text"
                        id="searchInput"
                        placeholder="Search customers..."
                        onkeyup="searchCustomers()"
                    />
                    <i class="fas fa-search"></i>
                </div>
            </div>

            <!-- Stats -->
            <div class="customers-stats">
                <div class="stat-card">
                    <h3 id="total-customers">0</h3>
                    <p>Total Customers</p>
                </div>
                <div class="stat-card">
                    <h3 id="active-customers">0</h3>
                    <p>Active This Month</p>
                </div>
                <div class="stat-card">
                    <h3 id="new-customers">0</h3>
                    <p>New This Week</p>
                </div>
            </div>

            <!-- Customers Grid -->
            <div id="customers-container" class="customers-grid">
                <!-- Customers will be loaded here -->
            </div>
        </div>

        <!-- Scripts -->
        <script src="js/main.js"></script>
        <script>
            let customers = [];

            document.addEventListener("DOMContentLoaded", function () {
                loadCustomers();
                updateStats();
            });

            function loadCustomers() {
                // Get customers from localStorage or create sample data
                customers = JSON.parse(
                    localStorage.getItem("mooncart_customers")
                ) || [
                    {
                        id: "1",
                        name: "John Doe",
                        email: "john@example.com",
                        phone: "+1 234 567 8900",
                        role: "customer",
                        totalOrders: 15,
                        totalSpent: 4250.5,
                        joinedDate: "2024-01-15",
                        lastOrder: "2024-02-20",
                    },
                    {
                        id: "2",
                        name: "Jane Smith",
                        email: "jane@example.com",
                        phone: "+1 234 567 8901",
                        role: "customer",
                        totalOrders: 8,
                        totalSpent: 1890.0,
                        joinedDate: "2024-02-10",
                        lastOrder: "2024-02-18",
                    },
                    {
                        id: "3",
                        name: "Admin User",
                        email: "admin@mooncart.com",
                        phone: "+1 234 567 8902",
                        role: "admin",
                        totalOrders: 0,
                        totalSpent: 0,
                        joinedDate: "2023-12-01",
                        lastOrder: null,
                    },
                ];

                localStorage.setItem(
                    "mooncart_customers",
                    JSON.stringify(customers)
                );
                displayCustomers(customers);
            }

            function displayCustomers(customersToDisplay) {
                const container = document.getElementById(
                    "customers-container"
                );

                if (customersToDisplay.length === 0) {
                    container.innerHTML = `
                        <div class="empty-state">
                            <i class="fas fa-users"></i>
                            <h3>No customers found</h3>
                        </div>
                    `;
                    return;
                }

                container.innerHTML = customersToDisplay
                    .map((customer) => {
                        const initial = customer.name.charAt(0).toUpperCase();
                        const joinedDate = new Date(
                            customer.joinedDate
                        ).toLocaleDateString("en-US", {
                            year: "numeric",
                            month: "short",
                            day: "numeric",
                        });
                        const lastOrderDate = customer.lastOrder
                            ? new Date(customer.lastOrder).toLocaleDateString(
                                  "en-US",
                                  {
                                      year: "numeric",
                                      month: "short",
                                      day: "numeric",
                                  }
                              )
                            : "Never";

                        return `
                        <div class="customer-card">
                            <span class="customer-role role-${customer.role}">
                                ${customer.role}
                            </span>
                            <div class="customer-header">
                                <div class="customer-avatar-large">${initial}</div>
                                <div class="customer-basic-info">
                                    <h3>${customer.name}</h3>
                                    <p>${customer.email}</p>
                                </div>
                            </div>
                            <div class="customer-details">
                                <div class="detail-item">
                                    <span class="detail-label">Total Orders</span>
                                    <span class="detail-value">${
                                        customer.totalOrders
                                    }</span>
                                </div>
                                <div class="detail-item">
                                    <span class="detail-label">Total Spent</span>
                                    <span class="detail-value">৳${parseFloat(
                                        customer.totalSpent
                                    ).toFixed(2)}</span>
                                </div>
                                <div class="detail-item">
                                    <span class="detail-label">Joined Date</span>
                                    <span class="detail-value">${joinedDate}</span>
                                </div>
                                <div class="detail-item">
                                    <span class="detail-label">Last Order</span>
                                    <span class="detail-value">${lastOrderDate}</span>
                                </div>
                            </div>
                            <div class="customer-actions">
                                <button class="btn-view-orders" onclick="viewCustomerOrders('${
                                    customer.id
                                }')">
                                    <i class="fas fa-shopping-bag"></i>
                                    View Orders
                                </button>
                                <button class="btn-contact" onclick="contactCustomer('${
                                    customer.email
                                }')">
                                    <i class="fas fa-envelope"></i>
                                    Contact
                                </button>
                            </div>
                        </div>
                    `;
                    })
                    .join("");
            }

            function updateStats() {
                document.getElementById("total-customers").textContent =
                    customers.length;
                document.getElementById("active-customers").textContent =
                    customers.filter((c) => c.totalOrders > 0).length;
                document.getElementById("new-customers").textContent =
                    customers.filter((c) => {
                        const oneWeekAgo = new Date();
                        oneWeekAgo.setDate(oneWeekAgo.getDate() - 7);
                        return new Date(c.joinedDate) > oneWeekAgo;
                    }).length;
            }

            function searchCustomers() {
                const searchTerm = document
                    .getElementById("searchInput")
                    .value.toLowerCase();
                const filtered = customers.filter(
                    (customer) =>
                        customer.name.toLowerCase().includes(searchTerm) ||
                        customer.email.toLowerCase().includes(searchTerm) ||
                        customer.phone.includes(searchTerm)
                );
                displayCustomers(filtered);
            }

            function viewCustomerOrders(customerId) {
                const customer = customers.find((c) => c.id === customerId);
                if (!customer) return;

                alert(
                    `Viewing orders for ${customer.name}\n\nTotal Orders: ${customer.totalOrders}\nTotal Spent: ৳${customer.totalSpent}`
                );
                // In a real application, this would redirect to orders page with customer filter
            }

            function contactCustomer(email) {
                window.location.href = `mailto:${email}`;
            }
        </script>
    </body>
</html>
