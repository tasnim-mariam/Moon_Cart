<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta
            name="description"
            content="Customer Dashboard - View orders and manage account"
        />
        <title>My Account - MoonCart</title>

        <!-- Favicon -->
        <link rel="icon" type="image/png" href="assets/images/favicon.png" />

        <!-- Google Fonts -->
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link
            href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap"
            rel="stylesheet"
        />

        <!-- Font Awesome -->
        <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
        />

        <!-- Stylesheets -->
        <link rel="stylesheet" href="css/main.css" />
        <link rel="stylesheet" href="css/responsive.css" />

        <!-- Chart.js -->
        <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    </head>
    <body>
        <!-- Top Bar -->
        <div class="top-bar">
            <div class="container">
                <div class="top-bar-content">
                    <div class="top-bar-left">
                        <span
                            ><i class="fas fa-phone-alt"></i> +1 234 567
                            8900</span
                        >
                        <span
                            ><i class="fas fa-envelope"></i>
                            info@mooncart.com</span
                        >
                    </div>
                    <div class="top-bar-right">
                        <span class="delivery-badge"
                            ><i class="fas fa-shipping-fast"></i> Free delivery
                            on orders over $50</span
                        >
                        <div class="social-icons">
                            <a href="#"><i class="fab fa-facebook-f"></i></a>
                            <a href="#"><i class="fab fa-twitter"></i></a>
                            <a href="#"><i class="fab fa-instagram"></i></a>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Header -->
        <header class="header">
            <div class="container">
                <nav class="navbar">
                    <a href="index.html" class="logo">
                        <div class="logo-icon">
                            <i class="fas fa-moon"></i>
                        </div>
                        <div class="logo-text">
                            <span class="logo-main"
                                >Moon<span class="logo-accent">Cart</span></span
                            >
                            <span class="logo-tagline">Fresh & Fast</span>
                        </div>
                    </a>

                    <ul class="nav-menu">
                        <li>
                            <a href="index.html" class="nav-link">
                                <i class="fas fa-home"></i>
                                <span>Home</span>
                            </a>
                        </li>
                        <li>
                            <a href="products.html" class="nav-link">
                                <i class="fas fa-utensils"></i>
                                <span>Products</span>
                            </a>
                        </li>
                        <li>
                            <a href="about.html" class="nav-link">
                                <i class="fas fa-info-circle"></i>
                                <span>About</span>
                            </a>
                        </li>
                        <li>
                            <a href="contact.html" class="nav-link">
                                <i class="fas fa-envelope"></i>
                                <span>Contact</span>
                            </a>
                        </li>
                        <li>
                            <a href="product-requests.html" class="nav-link">
                                <i class="fas fa-comments"></i>
                                <span>Product Requests</span>
                            </a>
                        </li>
                    </ul>

                    <div class="nav-actions">
                        <a href="cart.html" class="cart-icon-wrapper">
                            <div class="cart-icon">
                                <i class="fas fa-shopping-bag"></i>
                                <span class="cart-count">0</span>
                            </div>
                            <span class="cart-text">Cart</span>
                        </a>
                        <!-- Account Section (Dynamic) -->
                        <div id="account-section" class="account-section">
                            <div class="auth-buttons">
                                <a href="login.html" class="btn-login">
                                    <i class="fas fa-sign-in-alt"></i>
                                    <span>Login</span>
                                </a>
                                <a href="signup.html" class="btn-signup">
                                    <i class="fas fa-user-plus"></i>
                                    <span>Sign Up</span>
                                </a>
                            </div>
                        </div>

                        <div class="menu-toggle">
                            <span></span>
                            <span></span>
                            <span></span>
                        </div>
                    </div>
                </nav>
            </div>
        </header>

        <!-- Dashboard -->
        <div class="dashboard">
            <!-- Sidebar -->
            <aside class="sidebar">
                <div class="sidebar-divider">
                    <span>MAIN MENU</span>
                </div>

                <div class="sidebar-menu">
                    <a
                        href="#dashboard"
                        class="sidebar-link active"
                        onclick="showSection('dashboard')"
                    >
                        <i class="fas fa-home"></i> Dashboard
                    </a>
                    <a
                        href="#orders"
                        class="sidebar-link"
                        onclick="showSection('orders')"
                    >
                        <i class="fas fa-shopping-bag"></i> My Orders
                    </a>
                    <a
                        href="#wishlist"
                        class="sidebar-link"
                        onclick="showSection('wishlist')"
                    >
                        <i class="fas fa-heart"></i> Wishlist
                    </a>
                    <a
                        href="#addresses"
                        class="sidebar-link"
                        onclick="showSection('addresses')"
                    >
                        <i class="fas fa-map-marker-alt"></i> Addresses
                    </a>
                    <a
                        href="#profile"
                        class="sidebar-link"
                        onclick="showSection('profile')"
                    >
                        <i class="fas fa-user"></i> Profile
                    </a>

                    <div class="sidebar-divider">
                        <span>ACCOUNT</span>
                    </div>

                    <a
                        href="javascript:logout()"
                        class="sidebar-link sidebar-link-logout"
                    >
                        <i class="fas fa-sign-out-alt"></i> Logout
                    </a>
                </div>
            </aside>

            <!-- Main Content -->
            <main class="dashboard-content">
                <!-- Dashboard Section -->
                <section id="dashboard-section" class="dashboard-section">
                    <h2
                        style="
                            margin-bottom: 30px;
                            font-size: 28px;
                            font-weight: 700;
                            color: var(--text-dark);
                        "
                    >Welcome, <span id="welcome-name">John</span>!</h2>

                    <!-- Stats Grid - Modern Cards -->
                    <div
                        style="
                            display: grid;
                            grid-template-columns: repeat(
                                auto-fit,
                                minmax(240px, 1fr)
                            );
                            gap: 20px;
                            margin-bottom: 30px;
                        "
                    >
                        <!-- Total Orders Card -->
                        <div
                            style="
                                background: linear-gradient(
                                    135deg,
                                    #667eea 0%,
                                    #764ba2 100%
                                );
                                padding: 25px;
                                border-radius: 15px;
                                box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
                                color: white;
                                position: relative;
                                overflow: hidden;
                            "
                        >
                            <div
                                style="
                                    position: absolute;
                                    top: -20px;
                                    right: -20px;
                                    font-size: 100px;
                                    opacity: 0.2;
                                "
                            >
                                <i class="fas fa-shopping-bag"></i>
                            </div>
                            <div style="position: relative; z-index: 1">
                                <div
                                    style="
                                        font-size: 14px;
                                        opacity: 0.9;
                                        margin-bottom: 8px;
                                        text-transform: uppercase;
                                        letter-spacing: 1px;
                                    "
                                >
                                    Total Orders
                                </div>
                                <div
                                    style="
                                        font-size: 36px;
                                        font-weight: 700;
                                        margin-bottom: 5px;
                                    "
                                >
                                    8
                                </div>
                                <div style="font-size: 13px; opacity: 0.8">
                                    <i class="fas fa-arrow-up"></i> 2 from last
                                    month
                                </div>
                            </div>
                        </div>

                        <!-- Pending Orders Card -->
                        <div
                            style="
                                background: linear-gradient(
                                    135deg,
                                    #fa709a 0%,
                                    #fee140 100%
                                );
                                padding: 25px;
                                border-radius: 15px;
                                box-shadow: 0 10px 30px rgba(250, 112, 154, 0.4);
                                color: white;
                                position: relative;
                                overflow: hidden;
                            "
                        >
                            <div
                                style="
                                    position: absolute;
                                    top: -20px;
                                    right: -20px;
                                    font-size: 100px;
                                    opacity: 0.2;
                                "
                            >
                                <i class="fas fa-clock"></i>
                            </div>
                            <div style="position: relative; z-index: 1">
                                <div
                                    style="
                                        font-size: 14px;
                                        opacity: 0.9;
                                        margin-bottom: 8px;
                                        text-transform: uppercase;
                                        letter-spacing: 1px;
                                    "
                                >
                                    Pending Orders
                                </div>
                                <div
                                    style="
                                        font-size: 36px;
                                        font-weight: 700;
                                        margin-bottom: 5px;
                                    "
                                >
                                    2
                                </div>
                                <div style="font-size: 13px; opacity: 0.8">
                                    <i class="fas fa-check"></i> Ready for
                                    delivery
                                </div>
                            </div>
                        </div>

                        <!-- Total Spent Card -->
                        <div
                            style="
                                background: linear-gradient(
                                    135deg,
                                    #f093fb 0%,
                                    #f5576c 100%
                                );
                                padding: 25px;
                                border-radius: 15px;
                                box-shadow: 0 10px 30px rgba(245, 87, 108, 0.4);
                                color: white;
                                position: relative;
                                overflow: hidden;
                            "
                        >
                            <div
                                style="
                                    position: absolute;
                                    top: -20px;
                                    right: -20px;
                                    font-size: 100px;
                                    opacity: 0.2;
                                "
                            >
                                <i class="fas fa-dollar-sign"></i>
                            </div>
                            <div style="position: relative; z-index: 1">
                                <div
                                    style="
                                        font-size: 14px;
                                        opacity: 0.9;
                                        margin-bottom: 8px;
                                        text-transform: uppercase;
                                        letter-spacing: 1px;
                                    "
                                >
                                    Total Spent
                                </div>
                                <div
                                    style="
                                        font-size: 36px;
                                        font-weight: 700;
                                        margin-bottom: 5px;
                                    "
                                >
                                    ৳485.50
                                </div>
                                <div style="font-size: 13px; opacity: 0.8">
                                    <i class="fas fa-chart-line"></i> ৳125 this
                                    month
                                </div>
                            </div>
                        </div>

                        <!-- Wishlist Items Card -->
                        <div
                            style="
                                background: linear-gradient(
                                    135deg,
                                    #30cfd0 0%,
                                    #330867 100%
                                );
                                padding: 25px;
                                border-radius: 15px;
                                box-shadow: 0 10px 30px rgba(48, 207, 208, 0.4);
                                color: white;
                                position: relative;
                                overflow: hidden;
                            "
                        >
                            <div
                                style="
                                    position: absolute;
                                    top: -20px;
                                    right: -20px;
                                    font-size: 100px;
                                    opacity: 0.2;
                                "
                            >
                                <i class="fas fa-heart"></i>
                            </div>
                            <div style="position: relative; z-index: 1">
                                <div
                                    style="
                                        font-size: 14px;
                                        opacity: 0.9;
                                        margin-bottom: 8px;
                                        text-transform: uppercase;
                                        letter-spacing: 1px;
                                    "
                                >
                                    Wishlist Items
                                </div>
                                <div
                                    style="
                                        font-size: 36px;
                                        font-weight: 700;
                                        margin-bottom: 5px;
                                    "
                                >
                                    12
                                </div>
                                <div style="font-size: 13px; opacity: 0.8">
                                    <i class="fas fa-heart"></i> 3 added this
                                    week
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Charts Row -->
                    <div
                        style="
                            display: grid;
                            grid-template-columns: 2fr 1fr;
                            gap: 20px;
                            margin-bottom: 30px;
                        "
                    >
                        <!-- Spending Chart -->
                        <div
                            style="
                                background: white;
                                padding: 25px;
                                border-radius: 15px;
                                box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08);
                            "
                        >
                            <h3
                                style="
                                    margin-bottom: 20px;
                                    font-size: 18px;
                                    font-weight: 600;
                                    color: var(--text-dark);
                                "
                            >
                                <i
                                    class="fas fa-chart-area"
                                    style="
                                        color: var(--primary-color);
                                        margin-right: 8px;
                                    "
                                ></i>
                                Monthly Spending
                            </h3>
                            <canvas
                                id="customerSpendingChart"
                                style="max-height: 300px"
                            ></canvas>
                        </div>

                        <!-- Order Status Pie Chart -->
                        <div
                            style="
                                background: white;
                                padding: 25px;
                                border-radius: 15px;
                                box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08);
                            "
                        >
                            <h3
                                style="
                                    margin-bottom: 20px;
                                    font-size: 18px;
                                    font-weight: 600;
                                    color: var(--text-dark);
                                "
                            >
                                <i
                                    class="fas fa-chart-pie"
                                    style="
                                        color: var(--primary-color);
                                        margin-right: 8px;
                                    "
                                ></i>
                                Order Categories
                            </h3>
                            <canvas
                                id="customerCategoryChart"
                                style="max-height: 300px"
                            ></canvas>
                        </div>
                    </div>

                    <!-- Quick Actions -->
                    <div
                        style="
                            background: white;
                            padding: 30px;
                            border-radius: var(--border-radius);
                            box-shadow: var(--shadow);
                            margin-top: 30px;
                        "
                    >
                        <h3 style="margin-bottom: 20px">Quick Actions</h3>
                        <div
                            style="
                                display: grid;
                                grid-template-columns: repeat(
                                    auto-fit,
                                    minmax(200px, 1fr)
                                );
                                gap: 15px;
                            "
                        >
                            <button
                                class="btn btn-primary"
                                onclick="window.location.href='products.html'"
                            >
                                <i class="fas fa-shopping-cart"></i> Continue
                                Shopping
                            </button>
                            <button
                                class="btn btn-secondary"
                                onclick="window.location.href='cart.html'"
                            >
                                <i class="fas fa-shopping-bag"></i> View Cart
                            </button>
                            <button
                                class="btn btn-outline"
                                onclick="showSection('orders')"
                            >
                                <i class="fas fa-list"></i> Track Orders
                            </button>
                            <button
                                class="btn btn-outline"
                                onclick="window.location.href='product-requests.html'"
                            >
                                <i class="fas fa-plus"></i> Request Product
                            </button>
                        </div>
                    </div>

                    <!-- Recent Orders -->
                    <div
                        style="
                            background: white;
                            padding: 30px;
                            border-radius: var(--border-radius);
                            box-shadow: var(--shadow);
                            margin-top: 30px;
                        "
                    >
                        <h3 style="margin-bottom: 20px">Recent Orders</h3>
                        <div id="customer-orders">
                            <!-- Orders will be dynamically inserted here -->
                        </div>
                    </div>
                </section>

                <!-- Orders Section -->
                <section
                    id="orders-section"
                    class="dashboard-section"
                    style="display: none"
                >
                    <div
                        style="
                            background: white;
                            padding: 30px;
                            border-radius: var(--border-radius);
                            box-shadow: var(--shadow);
                        "
                    >
                        <div style="margin-bottom: 20px">
                            <input
                                type="text"
                                class="form-input"
                                placeholder="Search orders..."
                                style="max-width: 400px; margin: 0"
                            />
                        </div>

                        <div id="customer-orders-full">
                            <!-- Full orders list will be inserted here -->
                        </div>
                    </div>
                </section>

                <!-- Wishlist Section -->
                <section
                    id="wishlist-section"
                    class="dashboard-section"
                    style="display: none"
                >
                    <div class="products-grid">
                        <div
                            class="product-card"
                            data-id="wish1"
                            data-category="food"
                        >
                            <div class="product-image">
                                <img
                                    src="https://images.unsplash.com/photo-1565299624946-b28f40a0ae38?w=400&h=300&fit=crop"
                                    alt="Pizza"
                                />
                                <button
                                    class="product-badge"
                                    style="
                                        background: var(--danger-color);
                                        cursor: pointer;
                                    "
                                >
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>
                            <div class="product-info">
                                <span class="product-category">Food</span>
                                <h3 class="product-name">Delicious Pizza</h3>
                                <p class="product-description">
                                    Freshly baked pizza
                                </p>
                                <div class="product-footer">
                                    <span class="product-price">$26.99</span>
                                    <button class="add-to-cart">
                                        <i class="fas fa-shopping-cart"></i> Add
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div
                            class="product-card"
                            data-id="wish2"
                            data-category="food"
                        >
                            <div class="product-image">
                                <img
                                    src="https://images.unsplash.com/photo-1555939594-58d7cb561ad1?w=400&h=300&fit=crop"
                                    alt="Pasta"
                                />
                                <button
                                    class="product-badge"
                                    style="
                                        background: var(--danger-color);
                                        cursor: pointer;
                                    "
                                >
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>
                            <div class="product-info">
                                <span class="product-category">Food</span>
                                <h3 class="product-name">Italian Pasta</h3>
                                <p class="product-description">
                                    Authentic pasta
                                </p>
                                <div class="product-footer">
                                    <span class="product-price">$18.99</span>
                                    <button class="add-to-cart">
                                        <i class="fas fa-shopping-cart"></i> Add
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Addresses Section -->
                <section
                    id="addresses-section"
                    class="dashboard-section"
                    style="display: none"
                >
                    <div style="margin-bottom: 20px">
                        <button
                            class="btn btn-primary"
                            onclick="openModal('add-address-modal')"
                        >
                            <i class="fas fa-plus"></i> Add New Address
                        </button>
                    </div>

                    <div
                        style="
                            display: grid;
                            grid-template-columns: repeat(
                                auto-fill,
                                minmax(300px, 1fr)
                            );
                            gap: 20px;
                        "
                    >
                        <div
                            style="
                                background: white;
                                padding: 25px;
                                border-radius: var(--border-radius);
                                box-shadow: var(--shadow);
                                border-left: 4px solid var(--primary-color);
                            "
                        >
                            <div
                                style="
                                    display: flex;
                                    justify-content: space-between;
                                    align-items: start;
                                    margin-bottom: 15px;
                                "
                            >
                                <h4><i class="fas fa-home"></i> Home</h4>
                                <span
                                    style="
                                        background: var(--primary-color);
                                        color: white;
                                        padding: 3px 10px;
                                        border-radius: 12px;
                                        font-size: 12px;
                                    "
                                    >Default</span
                                >
                            </div>
                            <p
                                style="
                                    color: var(--text-light);
                                    margin-bottom: 15px;
                                "
                            >
                                123 Main Street, Apt 4B<br />
                                New York, NY 10001<br />
                                Phone: +1 234 567 8900
                            </p>
                            <div style="display: flex; gap: 10px">
                                <button class="btn btn-sm">Edit</button>
                                <button
                                    class="btn btn-sm"
                                    style="background: var(--danger-color)"
                                >
                                    Delete
                                </button>
                            </div>
                        </div>

                        <div
                            style="
                                background: white;
                                padding: 25px;
                                border-radius: var(--border-radius);
                                box-shadow: var(--shadow);
                            "
                        >
                            <h4 style="margin-bottom: 15px">
                                <i class="fas fa-briefcase"></i> Office
                            </h4>
                            <p
                                style="
                                    color: var(--text-light);
                                    margin-bottom: 15px;
                                "
                            >
                                456 Corporate Ave, Suite 200<br />
                                New York, NY 10002<br />
                                Phone: +1 234 567 8900
                            </p>
                            <div style="display: flex; gap: 10px">
                                <button class="btn btn-sm">Edit</button>
                                <button
                                    class="btn btn-sm"
                                    style="background: var(--danger-color)"
                                >
                                    Delete
                                </button>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Profile Section -->
                <section
                    id="profile-section"
                    class="dashboard-section"
                    style="display: none"
                >
                    <div
                        style="
                            background: white;
                            padding: 30px;
                            border-radius: var(--border-radius);
                            box-shadow: var(--shadow);
                        "
                    >
                        <form>
                            <div
                                style="text-align: center; margin-bottom: 30px"
                            >
                                <div
                                    style="
                                        width: 120px;
                                        height: 120px;
                                        background: var(--primary-color);
                                        border-radius: 50%;
                                        display: inline-flex;
                                        align-items: center;
                                        justify-content: center;
                                        font-size: 48px;
                                        font-weight: 700;
                                        color: white;
                                        margin-bottom: 15px;
                                    "
                                >
                                    JD
                                </div>
                                <button type="button" class="btn btn-outline">
                                    Change Photo
                                </button>
                            </div>

                            <div
                                style="
                                    display: grid;
                                    grid-template-columns: 1fr 1fr;
                                    gap: 20px;
                                "
                            >
                                <div class="form-group">
                                    <label class="form-label">First Name</label>
                                    <input
                                        type="text"
                                        class="form-input"
                                        value="John"
                                    />
                                </div>

                                <div class="form-group">
                                    <label class="form-label">Last Name</label>
                                    <input
                                        type="text"
                                        class="form-input"
                                        value="Doe"
                                    />
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="form-label">Email Address</label>
                                <input
                                    type="email"
                                    class="form-input"
                                    value="john@example.com"
                                />
                            </div>

                            <div class="form-group">
                                <label class="form-label">Phone Number</label>
                                <input
                                    type="tel"
                                    class="form-input"
                                    value="+1 234 567 8900"
                                />
                            </div>

                            <hr style="margin: 30px 0" />

                            <h3 style="margin-bottom: 20px">Change Password</h3>

                            <div class="form-group">
                                <label class="form-label"
                                    >Current Password</label
                                >
                                <input
                                    type="password"
                                    class="form-input"
                                    placeholder="Enter current password"
                                />
                            </div>

                            <div
                                style="
                                    display: grid;
                                    grid-template-columns: 1fr 1fr;
                                    gap: 20px;
                                "
                            >
                                <div class="form-group">
                                    <label class="form-label"
                                        >New Password</label
                                    >
                                    <input
                                        type="password"
                                        class="form-input"
                                        placeholder="Enter new password"
                                    />
                                </div>

                                <div class="form-group">
                                    <label class="form-label"
                                        >Confirm Password</label
                                    >
                                    <input
                                        type="password"
                                        class="form-input"
                                        placeholder="Confirm new password"
                                    />
                                </div>
                            </div>

                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-save"></i> Save Changes
                            </button>
                        </form>
                    </div>
                </section>
            </main>
        </div>

        <!-- Order Details Modal -->
        <div id="order-details-modal" class="modal" style="display: none">
            <div class="modal-content" style="max-width: 800px">
                <span
                    class="modal-close"
                    onclick="MoonCart.closeModal('order-details-modal')"
                    >&times;</span
                >
                <div id="order-details"></div>
            </div>
        </div>

        <!-- Scripts -->
        <script src="js/main.js"></script>
        <script src="js/cart.js"></script>
        <script src="js/order.js"></script>
        <script src="js/ui.js"></script>
        <script>
            // Mock customer user
            const mockUser = {
                id: "cust1",
                name: "John Doe",
                email: "john@example.com",
                role: "customer",
            };
            MoonCart.saveCurrentUser(mockUser);

            // Update customer info (with safe checks)
            const customerNameEl = document.getElementById("customer-name");
            const customerEmailEl = document.getElementById("customer-email");
            const welcomeNameEl = document.getElementById("welcome-name");
            
            if (customerNameEl) customerNameEl.textContent = mockUser.name;
            if (customerEmailEl) customerEmailEl.textContent = mockUser.email;
            if (welcomeNameEl) welcomeNameEl.textContent = mockUser.name.split(" ")[0];

            // Load orders on page load
            document.addEventListener("DOMContentLoaded", function () {
                renderCustomerOrders();

                // Also render in the full orders section
                setTimeout(() => {
                    const fullOrdersDiv = document.createElement("div");
                    fullOrdersDiv.id = "customer-orders-temp";
                    document
                        .getElementById("customer-orders-full")
                        .appendChild(fullOrdersDiv);
                    document.getElementById("customer-orders-temp").id =
                        "customer-orders";
                    renderCustomerOrders();
                    document.getElementById("customer-orders").id =
                        "customer-orders-full2";
                }, 100);
            });

            // Show/hide sections
            function showSection(section) {
                // Hide all sections
                document
                    .querySelectorAll(".dashboard-section")
                    .forEach((s) => (s.style.display = "none"));

                // Remove active class from all links
                document
                    .querySelectorAll(".sidebar-link")
                    .forEach((l) => l.classList.remove("active"));

                // Show selected section
                document.getElementById(section + "-section").style.display =
                    "block";

                // Add active class to clicked link
                event.target.closest(".sidebar-link").classList.add("active");
            }

            // Logout function
            function logout() {
                localStorage.removeItem("mooncart_user");
                window.location.href = "index.html";
            }

            // Initialize Charts
            function initCustomerCharts() {
                // Monthly Spending Chart
                const spendingCtx = document.getElementById(
                    "customerSpendingChart"
                );
                if (spendingCtx) {
                    new Chart(spendingCtx, {
                        type: "line",
                        data: {
                            labels: [
                                "Jan",
                                "Feb",
                                "Mar",
                                "Apr",
                                "May",
                                "Jun",
                                "Jul",
                            ],
                            datasets: [
                                {
                                    label: "Spending",
                                    data: [45, 65, 52, 78, 95, 68, 125],
                                    borderColor: "rgba(227, 30, 36, 1)",
                                    backgroundColor: "rgba(227, 30, 36, 0.1)",
                                    tension: 0.4,
                                    fill: true,
                                    pointRadius: 5,
                                    pointHoverRadius: 7,
                                    pointBackgroundColor:
                                        "rgba(227, 30, 36, 1)",
                                    pointBorderColor: "#fff",
                                    pointBorderWidth: 2,
                                },
                            ],
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: {
                                legend: {
                                    display: false,
                                },
                                tooltip: {
                                    backgroundColor: "rgba(0, 0, 0, 0.8)",
                                    padding: 12,
                                    titleColor: "#fff",
                                    bodyColor: "#fff",
                                    borderColor: "rgba(227, 30, 36, 1)",
                                    borderWidth: 1,
                                },
                            },
                            scales: {
                                y: {
                                    beginAtZero: true,
                                    grid: {
                                        color: "rgba(0, 0, 0, 0.05)",
                                    },
                                    ticks: {
                                        callback: function (value) {
                                            return "৳" + value;
                                        },
                                    },
                                },
                                x: {
                                    grid: {
                                        display: false,
                                    },
                                },
                            },
                        },
                    });
                }

                // Order Categories Pie Chart
                const categoryCtx = document.getElementById(
                    "customerCategoryChart"
                );
                if (categoryCtx) {
                    new Chart(categoryCtx, {
                        type: "doughnut",
                        data: {
                            labels: [
                                "Food",
                                "Beverages",
                                "Medicine",
                                "Groceries",
                            ],
                            datasets: [
                                {
                                    data: [40, 25, 20, 15],
                                    backgroundColor: [
                                        "rgba(227, 30, 36, 0.8)",
                                        "rgba(255, 107, 53, 0.8)",
                                        "rgba(23, 162, 184, 0.8)",
                                        "rgba(40, 167, 69, 0.8)",
                                    ],
                                    borderColor: [
                                        "rgba(227, 30, 36, 1)",
                                        "rgba(255, 107, 53, 1)",
                                        "rgba(23, 162, 184, 1)",
                                        "rgba(40, 167, 69, 1)",
                                    ],
                                    borderWidth: 2,
                                },
                            ],
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: {
                                legend: {
                                    position: "bottom",
                                    labels: {
                                        padding: 15,
                                        font: {
                                            size: 12,
                                            family: "Poppins",
                                        },
                                    },
                                },
                                tooltip: {
                                    backgroundColor: "rgba(0, 0, 0, 0.8)",
                                    padding: 12,
                                    borderWidth: 1,
                                },
                            },
                        },
                    });
                }
            }

            // Initialize charts when page loads
            document.addEventListener("DOMContentLoaded", function () {
                initCustomerCharts();
            });
        </script>
    </body>
</html>
